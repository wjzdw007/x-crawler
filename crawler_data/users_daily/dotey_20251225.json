{
  "user": {
    "screen_name": "dotey",
    "name": "宝玉",
    "description": "Prompt Engineer, dedicated to learning and disseminating knowledge about AI, software engineering, and engineering management.",
    "followers_count": 160595,
    "verified": false,
    "is_blue_verified": true
  },
  "date": "20251225",
  "last_updated": "2025-12-25T14:05:15.230762",
  "tweet_count": 7,
  "tweets": [
    {
      "id": "2004025068498657334",
      "text": "我经常在提示词里面用一些中括号或者大括号表示占位符，结果反而让人困惑，我顺便把这位网友的困惑和我的回答整理了一下。\n\nQ：宝玉老师，你的提示词里总是有各种尖括号<>、中括号[]、大括号{}，还有${}，我看晕了。这些符号是有严格定义的吗？是不是每种括号都有特定用法，需要我每次都手动去改？\n\nA：不用纠结它们的严格定义。\n\n这就好比你给同事留便条，你在“需办事项”下面画个圈，或者画个方框，甚至打个星号，同事都能看懂那是重点。\n\n对 AI 来说也是一样。\n\n第一，[]{}${}这样的括号都可以用来做占位符。\n\n大语言模型是在海量代码数据上训练出来的。在代码里，中括号、大括号、${} 通常都代表“变量”或“参数”。\n\n所以，当你用 [主题] 或者 ${主题} 时，AI 看到这些符号，潜意识里就会明白：“哦，这里是个坑，将来会有具体内容填进来。”\n\n至于你用方括号还是花括号，对 AI 来说区别真没那么大。它很聪明，能通过上下文理解你的意图。除非你明确规定了格式，否则不需要死记硬背每个符号的含义，也不需要每次都手动去把符号删掉再填内容，它们更多是写给 AI 看的结构标记。\n\n补充一下，小括号（）更多用来对当前词补充解释说明，我在翻译时会让 AI 用小括号补充背景信息。\n\n第二，XML 标签是为了让结构更清晰。\n\n你看到的 <ref>内容</ref> 或者 <context>背景</context> 这种写法，叫 XML 标签。\n\nDeepSeek 还把推理部分用 <think>...</think> 包起来，就是这一样的道理。\n\n你可以把它想象成是一个个收纳盒。\n\n如果你把一堆衣服、书、玩具一股脑扔给 AI，它可能会晕。但如果你用 <衣服>...</衣服> 把衣服包起来，用 <书>...</书> 把书包起来，AI 处理起来就井井有条。\n\n这不仅是给 AI 看的，也是给人看的，能让你的提示词结构像代码一样整洁。",
      "created_at": "Thu Dec 25 03:03:03 +0000 2025",
      "lang": "zh",
      "media": [
        {
          "type": "photo",
          "id": "2004024770480799745",
          "url": "https://pbs.twimg.com/media/G8-56TWXgAEUfSV.jpg"
        }
      ],
      "retweet": null,
      "quoted": null,
      "stats": {
        "retweet_count": 4,
        "favorite_count": 31,
        "reply_count": 1,
        "quote_count": 1
      }
    },
    {
      "id": "2004025879849324618",
      "text": "犀利点评😂\nhttps://t.co/YuV4f9Ibq9",
      "created_at": "Thu Dec 25 03:06:17 +0000 2025",
      "lang": "zh",
      "media": [],
      "retweet": null,
      "quoted": {
        "id": "2004000008564363281",
        "text": "非常好的文章。\n\n上一个理论水平这么高、但是产品体验这么差/多年不进步的大佬，还是 Phil Libin（Evernote）。\n\n当我看到他们有 1000 employees and 700+ agents 的时候，我终于理解为啥 Notion 能做得这么臃肿又缓慢了。\n\nNotion 越来越像（或者说已经是）下一个 Evernote 了。",
        "created_at": "Thu Dec 25 01:23:29 +0000 2025",
        "lang": "zh",
        "media": [],
        "retweet": null,
        "quoted": null,
        "user": {
          "id": "17185799",
          "name": "Carlos Gong 🇽🇰",
          "screen_name": "Carlos_Gong",
          "description": "Kind, sober, and casually dressed.",
          "followers_count": 14939,
          "friends_count": 2242,
          "verified": false,
          "is_blue_verified": false
        },
        "stats": {
          "retweet_count": 3,
          "favorite_count": 20,
          "reply_count": 4,
          "quote_count": 2
        }
      },
      "stats": {
        "retweet_count": 0,
        "favorite_count": 0,
        "reply_count": 0,
        "quote_count": 0
      }
    },
    {
      "id": "2004032243707400394",
      "text": "RT @AztecaAlpaca: “城市主题马克杯”\n\n示例城市：东京、新加坡、休斯敦、芝加哥\n\n（本提示词表现非常稳定，欢迎在评论区分享你喜欢的城市马克杯！）\n\n马克杯在设计上常常会承载城市的本地特色。本贴中对马克杯设计融入了主题城市的自然、建筑、习俗等文化元素，实现对城市…",
      "created_at": "Thu Dec 25 03:31:34 +0000 2025",
      "lang": "zh",
      "media": [],
      "retweet": {
        "id": "2003790788325703945",
        "text": "“城市主题马克杯”\n\n示例城市：东京、新加坡、休斯敦、芝加哥\n\n（本提示词表现非常稳定，欢迎在评论区分享你喜欢的城市马克杯！）\n\n马克杯在设计上常常会承载城市的本地特色。本贴中对马克杯设计融入了主题城市的自然、建筑、习俗等文化元素，实现对城市形象的生动展示。\n\n---\n提示词(英文版的见评论区）：\n\n城市：伦敦\n\n一张超写实的微距摄影作品，呈现一只将正式器物功能与精致艺术雕塑融合在一起的独特陶瓷杯，作为对一座充满活力的城市的致敬。杯子的上三分之一与杯口光滑、抛光、呈圆柱形，设计为舒适饮用之用，并以统一、柔和的陶瓷釉面完成处理，为整件作品奠定和谐的基调。在这段光滑的上部区域正面，嵌有一块独特的陶瓷铭牌，上面刻有城市名称。铭牌的字体与风格应体现该城市独特的性格。\n\n光滑的上缘与质感丰富的下半部分之间的边界是有机的、不规则的、流动的，避免任何尖锐、笔直或工业化的分界线。光滑的釉面似乎自然地向下融化或渗入逐渐浮现的雕塑形态之中。在这一流动过渡之下，杯身动态地转化为深度纹理的雕塑，象征城市的本质。雕塑融合了当地地质、标志性建筑剪影、本土植物，以及文化习俗或产业的象征元素。在这段纹理丰富的下部区域中，有一个深邃、自由形态、洞穴般的凹槽被有机地雕刻出来。杯柄自然地从雕塑化的侧面生长出来，代表城市的某个主题元素。杯底则是一片扎实的基础，象征城市的基岩或历史根基。\n\n整体色彩方案严格源自所选城市独特的视觉识别体系，并被转译为丰富、自然的陶瓷釉色。（例如：若城市临海，色调从沙色米黄过渡到深海蓝；若为工业城市，则从砖红延伸到钢灰；若为森林城市，则从浓郁的绿色延展到木质棕色。）这些城市特定的色彩必须保持高度统一，避免任何突兀冲突。在光滑杯口与纹理杯身之间，以及不同雕塑元素之间的过渡区域，釉色呈现细腻、绘画般的渐变与自然晕染，形成柔和、扩散的色彩过渡，而非硬边界。在不规则的内腔中，有一个细致的高浮雕城市地标场景，以同样统一的美学与城市特定釉色呈现，并带有柔和的过渡。这个内部场景由微型窗户透出的柔暖琥珀色内光加以点亮，形成醒目却和谐的视觉强调。极致细节的陶土与釉面纹理、电影级灯光、Octane 渲染风格。\n\n--ar 1:1",
        "created_at": "Wed Dec 24 11:32:07 +0000 2025",
        "lang": "zh",
        "media": [
          {
            "type": "photo",
            "id": "2003787620896456705",
            "url": "https://pbs.twimg.com/media/G87iOYTbwAEF2Go.jpg"
          },
          {
            "type": "photo",
            "id": "2003787660545183744",
            "url": "https://pbs.twimg.com/media/G87iQsAbUAAGeuS.jpg"
          },
          {
            "type": "photo",
            "id": "2003787699569004545",
            "url": "https://pbs.twimg.com/media/G87iS9YbkAEENaW.jpg"
          },
          {
            "type": "photo",
            "id": "2003790516886855680",
            "url": "https://pbs.twimg.com/media/G87k28tWYAAsoho.jpg"
          }
        ],
        "retweet": null,
        "quoted": {
          "id": "2003511456143405497",
          "text": "Time for a Cuppa\n\n#TimeForACuppa #AIArtWork #AIArt #AIArtists #AIArtCommunity https://t.co/EZgli9N7XQ",
          "created_at": "Tue Dec 23 17:02:09 +0000 2025",
          "lang": "en",
          "media": [
            {
              "type": "photo",
              "id": "2003511452695777280",
              "url": "https://pbs.twimg.com/media/G83nDRlb0AAyHiR.jpg"
            }
          ],
          "retweet": null,
          "quoted": null,
          "user": {
            "id": "108043710",
            "name": "Beanie Blossom",
            "screen_name": "BeanieBlossom",
            "description": "Sharing daily AI art + promptshares \nExplorations of color, mood, and story \nCollect my work ↓",
            "followers_count": 7149,
            "friends_count": 980,
            "verified": false,
            "is_blue_verified": true
          },
          "stats": {
            "retweet_count": 3,
            "favorite_count": 31,
            "reply_count": 8,
            "quote_count": 1
          }
        },
        "user": {
          "id": "1725169104963657728",
          "name": "阿兹特克小羊驼",
          "screen_name": "AztecaAlpaca",
          "description": "AI时代的搬砖工（Prompt Kiddie)、球迷（勇士&马刺@ NBA，利物浦@英超）\n休憩于科技与人文的十字路口 \n 探寻科学、思想与生活的张力",
          "followers_count": 1707,
          "friends_count": 686,
          "verified": false,
          "is_blue_verified": true
        },
        "stats": {
          "retweet_count": 5,
          "favorite_count": 23,
          "reply_count": 5,
          "quote_count": 2
        }
      },
      "quoted": null,
      "stats": {
        "retweet_count": 5,
        "favorite_count": 0,
        "reply_count": 0,
        "quote_count": 0
      }
    },
    {
      "id": "2004058462217818592",
      "text": "谢谢补充👍\nhttps://t.co/7wsjLptHsA",
      "created_at": "Thu Dec 25 05:15:45 +0000 2025",
      "lang": "zh",
      "media": [],
      "retweet": null,
      "quoted": {
        "id": "2004055960797757487",
        "text": "我来给宝玉老师补充一些例子，中括号的作用是占位，XML 标签的作用是结构分割。\n\n平常写提示词时，如果你不需要一个特别通用的模板，很少会用到中括号，比如你的提示词是这样: \n\n```prompt\n使用宫崎骏的画风，帮我画一幅海报，海报上是一位银发老婆婆站在大草原的脊背上，遥望天空。\n```prompt\n\n这句提示词中明显出现了两个重点: 画风和人物，你如果想把它做成一个通用提示词，方便以后随便修改画风和人物，你就可以改成这样:\n\n```prompt\n使用｛风格｝的画风，帮我画一幅海报，海报上是一位｛人物｝站在大草原的脊背上，遥望天空。\n\n风格: 宫崎骏\n人物: 银发老婆婆\n```prompt\n\n经过修改之后，提示词内容并没有发生变化，AI 在理解的时候会自动做填词填空，把提示词补全程我们第一版那样，但是对我们人类来说，它具备了良好的可重用性，尤其是在那种超长提示词里面，更为重要，因为我们只需要替换提示词最下面的几个关键变量即可。\n\n-- XML 标签 ---\n\n使用 XML 进行结构分割，本质上和在 markdown 里面使用 code 标签没有区别，都是为了让解析器明白我这里是一段有特殊意义的东西。\n\n在 markdown 中，当解析器遇到了 code 标签包裹的内容之后，会把它渲染成代码格式。\n\n在 AI 提示词中，当 AI 遇到类似 Context 之类的标签时，也会明白它是对正文的背景补充。\n\n---\n\nXML 标签作用比上面的 ｛｝更重要，因为｛｝括号是为了方便人类阅读，模板化提示词，但是 XML 标签是能同时方便人类和 AI，它对于 AI 理解你的意图，是有帮助的。",
        "created_at": "Thu Dec 25 05:05:49 +0000 2025",
        "lang": "zh",
        "media": [],
        "retweet": null,
        "quoted": null,
        "user": {
          "id": "1497795331488055296",
          "name": "耳朵",
          "screen_name": "RookieRicardoR",
          "description": "👂 倾听世界，萃取本质，分享洞见。 👨‍💻 软件工程师 | 🤖 AI深度应用 | 💰投资理财 | 分享深度思考 / AI / Prompt ➡️ 互关同频人 & 欢迎一起交流分享思考～",
          "followers_count": 1908,
          "friends_count": 173,
          "verified": false,
          "is_blue_verified": true
        },
        "stats": {
          "retweet_count": 1,
          "favorite_count": 4,
          "reply_count": 0,
          "quote_count": 2
        }
      },
      "stats": {
        "retweet_count": 0,
        "favorite_count": 2,
        "reply_count": 0,
        "quote_count": 0
      }
    },
    {
      "id": "2004058902803906625",
      "text": "RT @zuozizhen: Hacker News 有个帖子，让 2025 年通过副业每月赚 500 美元以上的人分享一下自己的项目，里面有很多特别冷门小众的领域，但确实有市场能赚到钱，我挑了 10 个感觉最有意思的分享一下，大家可以从满屏的AI中跳出来，换换脑子 🧵",
      "created_at": "Thu Dec 25 05:17:30 +0000 2025",
      "lang": "zh",
      "media": [],
      "retweet": {
        "id": "2003363685000229095",
        "text": "Hacker News 有个帖子，让 2025 年通过副业每月赚 500 美元以上的人分享一下自己的项目，里面有很多特别冷门小众的领域，但确实有市场能赚到钱，我挑了 10 个感觉最有意思的分享一下，大家可以从满屏的AI中跳出来，换换脑子 🧵",
        "created_at": "Tue Dec 23 07:14:57 +0000 2025",
        "lang": "zh",
        "media": [],
        "retweet": null,
        "quoted": null,
        "user": {
          "id": "797356078233251840",
          "name": "左子祯",
          "screen_name": "zuozizhen",
          "description": "✦ 曾负责 MasterGo 0-1 和 Smartisan 7.0 设计系统搭建 \n✦ 正在开发 Pinso",
          "followers_count": 16275,
          "friends_count": 181,
          "verified": false,
          "is_blue_verified": true
        },
        "stats": {
          "retweet_count": 222,
          "favorite_count": 1365,
          "reply_count": 25,
          "quote_count": 8
        }
      },
      "quoted": null,
      "stats": {
        "retweet_count": 222,
        "favorite_count": 0,
        "reply_count": 0,
        "quote_count": 0
      }
    },
    {
      "id": "2004066313589920102",
      "text": "RT @beihuo: https://t.co/aAopZ18aUl",
      "created_at": "Thu Dec 25 05:46:57 +0000 2025",
      "lang": "zxx",
      "media": [],
      "retweet": {
        "id": "2003729415508046321",
        "text": "https://t.co/aAopZ18aUl",
        "created_at": "Wed Dec 24 07:28:14 +0000 2025",
        "lang": "zxx",
        "media": [],
        "retweet": null,
        "quoted": null,
        "user": {
          "id": "209495090",
          "name": "北火",
          "screen_name": "beihuo",
          "description": "拆解、溯源、重构｜凡所有相，皆是虚妄 ｜混乱即阶梯",
          "followers_count": 15244,
          "friends_count": 1275,
          "verified": false,
          "is_blue_verified": true
        },
        "stats": {
          "retweet_count": 26,
          "favorite_count": 141,
          "reply_count": 4,
          "quote_count": 6
        }
      },
      "quoted": null,
      "stats": {
        "retweet_count": 26,
        "favorite_count": 0,
        "reply_count": 0,
        "quote_count": 0
      }
    },
    {
      "id": "2004110005180813606",
      "text": "RT @yan5xu: 强烈推荐读一下这篇文章 我自己做了些整理\n\n作者是北大 Linian Wang。文章讲的是把 Kimi K2 适配到 vLLM 的过程中，遇到一个很反直觉的现象：同一个模型，在官方 API 上 tool calling 几乎不出错，但换到 vLLM 上就…",
      "created_at": "Thu Dec 25 08:40:34 +0000 2025",
      "lang": "zh",
      "media": [],
      "retweet": {
        "id": "2004093011903631825",
        "text": "强烈推荐读一下这篇文章 我自己做了些整理\n\n作者是北大 Linian Wang。文章讲的是把 Kimi K2 适配到 vLLM 的过程中，遇到一个很反直觉的现象：同一个模型，在官方 API 上 tool calling 几乎不出错，但换到 vLLM 上就一塌糊涂。然后作者一步步定位原因、推动修复。\n\n我觉得它最值得看的点，其实不是“Kimi/K2/vLLM”上，而是通过这个过程可以把大模型 API 的底层逻辑理解清楚：\n\n大模型 API 的本质：把请求“展开成 Prompt（Token 序列）”，然后做补全（completion）。\n所谓 chatbot、tool calling / function calling，本质都是在这个过程上做工程封装。\n\n一切都可以拆回成：Render → Completion → Parse\n\n现在 Chat Completions（以及 function call / tool calling）看起来是这种“结构化请求”：\n- messages：system/user/assistant 多轮（也包含 tool_calls 与 tool 的返回）\n- tools / functions：工具定义\n- tool calling 的模式/约束：tool_choice、parallel tool calls 等\n- 采样/停止参数：temperature、stop、max_tokens…\n\n但在模型真正开始预测下一个 token 之前，这些东西都会被系统按照下面的过程处理：\n\n(A) 展开（render）→ 得到最终 Prompt（文本/Token 序列）\n(B) 补全（completion）→ 模型续写下一段 Token\n(C) 解析（parse）→ 把续写还原成 assistant 文本 / tool_calls 等结构化结果\n\n所以其实可以这么理解：\n- Chat Completions ≈ Completions +（A：自动把 messages 渲染成 prompt）+（C：把输出再解释回消息结构）\n- Chat + tool calling ≈ Chat +（C：把“特定格式的补全”解析成 tool_calls，并做 schema 校验/护栏）\n\n重点：Chat / Function Call 不是模型多了一种全新能力，而是服务端把 prompt 构造与输出解析自动化了；模型层面依旧是在做下一段 token 的补全。\n\n文章里出现的 bug 基本都发生在 A（render）或 C（parse），而不是“模型本身能力不行”。\n\n文章里一个非常实用的排障方法：\n- 不直接用 /v1/chat/completions\n- 而是在外部手动 apply_chat_template 得到最终 prompt\n- 再把这个 prompt 丢给更底层的 /v1/completions\n\n这么做的好处是：你能“看到真相”：\n- 你能检查最终 Prompt 到底长什么样（当然也可以用 echo 回显出来）\n- 你还能看到模型最原始的补全文本（协议 token 没被上层 parser 二次加工/丢弃）\n\n后面很多结论，都靠这一步才定位出来：问题不在“模型不会调工具”，而在 prompt 展开和输出解析存在不兼容或边界问题。\n\n三个问题，用更直白的话讲清楚就是展开和解析上出了问题\n\n1) Prompt 末尾少了“现在轮到 assistant 开始输出”的自动补全后缀\n\n本来应该用户问一句 → 模型应该立刻按 tool call 的格式进行补全。\n但因为一个参数没有传递到位，导致实际喂给模型的 prompt 末尾缺了关键的 assistant 回合起始标记 / generation prompt（可以理解为少了一个重要的协议尾巴，相当于没明确告诉模型“轮到你回答了”）。\n结果就是模型仍然会补全 token，但完全不知道“接下来该干嘛”\n- 有时像在续写历史对话（没进入回答态）\n- 有时输出自然语言闲聊\n- 有时输出半截结构化但不成形\n\n1) 空内容被错误渲染成，直接把 prompt 污染成噪声\n\n某条历史消息 content: '' 就是“空”，本来在 Prompt 也应该就是🈚️啥也不出现。\n结果实际渲染链路，框架内部为了统一数据结构，把 '' 标准化成类似 [{type: \"text\", text: \"\"}] 这样的 list（多模态/富文本体系里很常见）塞到 Prompt 里面。\n结果就是模型是在对“被污染的上下文”做补全。导致 tool calling 的效果劣化。\n\n3) 模型其实已经“写出了工具调用”，但解析器太严格，把它当异常丢掉了\n\n模型已经生成了“看起来就是工具调用”的片段，但是解析器太严格了，当做异常处理掉了。\n（这里面还有上下文污染导致模型生成格式不对的原因）\n\n读完这篇文章最大的收获\n\n1) 一切要还原到“Prompt 补全”这个本质上来理解。\n虽然这篇文章，是围绕 tool calling 展开的，但它的结论其实适用于所有大模型 API 场景（chat、completion、structured generation……）。\n不管你是用 chat 还是 function call，本质上都是在做“Prompt 补全”。\n所以当遇到问题，第一步都要还原到“最终 prompt 是什么样子？”要拿到实际喂给模型的 prompt，甚至不用像文章中这样，拿到协议层的，只用看到你的 API 请求就能判断对不对。\n另外很多 API 的报错，也可以从“Prompt 补全”这个角度去分析。\n\n2) Tool calling 本质是“强约束 Schema 输出”（甚至可以当 JSON 限定器/结构化生成器用）。\n从工程角度看，tool calling 更像：\n让模型按一个强约束的输出协议（schema）去生成结构化片段，然后由服务端解析并执行。\n\n一旦你把它理解其本质是“强 schema 生成”，你会发现 tool calling 还能干一件很实用的事：\n- 你不一定真的要“调用工具”，也可以把它当作 JSON/DSL 的限定器，让模型稳定地产出符合 schema 的结构化结果，再交给下游系统处理。\n\n对“强约束生成 / constrained decoding”这个方向感兴趣的话，也推荐顺手看：\n- XGrammar：偏“把语法/约束编译成高效的 token 级约束”，让解码阶段就不可能走出非法分支\n- LLGuidance：偏“用 guidance/约束驱动生成”，把结构化正确性前置到解码过程，而不是生成完再靠 parser 猜测。",
        "created_at": "Thu Dec 25 07:33:02 +0000 2025",
        "lang": "zh",
        "media": [],
        "retweet": null,
        "quoted": {
          "id": "2004060369170702461",
          "text": "@yan5xu https://t.co/EV14MswEdr",
          "created_at": "Thu Dec 25 05:23:20 +0000 2025",
          "lang": "qme",
          "media": [],
          "retweet": null,
          "quoted": null,
          "user": {
            "id": "116355740",
            "name": "九原客",
            "screen_name": "9hills",
            "description": "喜欢一切美好的事物。目前聚焦在大模型领域。",
            "followers_count": 23210,
            "friends_count": 1034,
            "verified": false,
            "is_blue_verified": true
          },
          "stats": {
            "retweet_count": 6,
            "favorite_count": 18,
            "reply_count": 0,
            "quote_count": 1
          }
        },
        "user": {
          "id": "115897222",
          "name": "yan5xu",
          "screen_name": "yan5xu",
          "description": "🤖 AI 野生研究员 | ex @ManusAI_HQ & @hey_im_monica\n推特内容仅代表个人观点，和公司无关",
          "followers_count": 8103,
          "friends_count": 370,
          "verified": false,
          "is_blue_verified": true
        },
        "stats": {
          "retweet_count": 18,
          "favorite_count": 112,
          "reply_count": 3,
          "quote_count": 2
        }
      },
      "quoted": null,
      "stats": {
        "retweet_count": 18,
        "favorite_count": 0,
        "reply_count": 0,
        "quote_count": 0
      }
    }
  ]
}